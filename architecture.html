<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <title>Architecture | LipSurf Plugin Developer Documentation</title><meta name="description" content="Documentation for developers looking to extend LipSurf using the official API. Create voice commands and shortcuts for the browser.">
    <link rel="modulepreload" href="/assets/app.2bad79ab.js"><link rel="modulepreload" href="/assets/architecture.html.35d32b62.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/architecture.html.a71d2b65.js">
    <link rel="stylesheet" href="/assets/style.f30c0ec3.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/icon-128.png" alt="LipSurf Plugin Developer Documentation"><span class="site-name can-hide">LipSurf Plugin Developer Documentation</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/lipsurf/plugins" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/lipsurf/plugins" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">Basics <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/" class="sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----></li><li><a href="/quick-start.html" class="sidebar-item" aria-label="5 Minute Quick Start"><!--[--><!--]--> 5 Minute Quick Start <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/architecture.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Architecture"><!--[--><!--]--> Architecture <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/architecture.html#overview" class="router-link-active router-link-exact-active sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/architecture.html#anatomy" class="router-link-active router-link-exact-active sidebar-item" aria-label="Anatomy"><!--[--><!--]--> Anatomy <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/architecture.html#gotchas" class="router-link-active router-link-exact-active sidebar-item" aria-label="Gotchas"><!--[--><!--]--> Gotchas <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/dynamic-matching.html" class="sidebar-item" aria-label="Match Patterns"><!--[--><!--]--> Match Patterns <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Advanced <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/contexts.html" class="sidebar-item" aria-label="Contexts"><!--[--><!--]--> Contexts <!--[--><!--]--></a><!----></li><li><a href="/langs.html" class="sidebar-item" aria-label="Internationalization"><!--[--><!--]--> Internationalization <!--[--><!--]--></a><!----></li><li><a href="/plugin-level-settings.html" class="sidebar-item" aria-label="Plugin-level Settings"><!--[--><!--]--> Plugin-level Settings <!--[--><!--]--></a><!----></li><li><a href="/testing.html" class="sidebar-item" aria-label="Testing"><!--[--><!--]--> Testing <!--[--><!--]--></a><!----></li><li><a href="/recipes.html" class="sidebar-item" aria-label="Recipes"><!--[--><!--]--> Recipes <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Help <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/help.html" class="sidebar-item" aria-label="Get Help"><!--[--><!--]--> Get Help <!--[--><!--]--></a><!----></li><li><a href="/glossary.html" class="sidebar-item" aria-label="Glossary"><!--[--><!--]--> Glossary <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">API Reference <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/api-reference/plugin.html" class="sidebar-item" aria-label="Plugin"><!--[--><!--]--> Plugin <!--[--><!--]--></a><!----></li><li><a href="/api-reference/command.html" class="sidebar-item" aria-label="Commands"><!--[--><!--]--> Commands <!--[--><!--]--></a><!----></li><li><a href="/api-reference/pluginbase-util.html" class="sidebar-item" aria-label="PluginBase.util"><!--[--><!--]--> PluginBase.util <!--[--><!--]--></a><!----></li><li><a href="/api-reference/test.html" class="sidebar-item" aria-label="Test"><!--[--><!--]--> Test <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Enterprise <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/api-reference/customstt.html" class="sidebar-item" aria-label="Custom STT API"><!--[--><!--]--> Custom STT API <!--[--><!--]--></a><!----></li><li><a href="/api-reference/script.html" class="sidebar-item" aria-label="LipSurf.js"><!--[--><!--]--> LipSurf.js <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="architecture" tabindex="-1"><a class="header-anchor" href="#architecture" aria-hidden="true">#</a> Architecture</h1><blockquote><p>The fact that even the core LipSurf functionality is written as plugins should attest to the power of LipSurf&#39;s extensibility.</p></blockquote><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h2><p>LipSurf <a href="/api-reference/plugin.html" class="">Plugins</a> add global or site-level voice functionality.</p><p>Every LipSurf <a href="/api-reference/command.html" class="">Command</a> must be a member of a <a href="/api-reference/plugin.html" class="">Plugin</a>.</p><p>Each website has its idiosyncrasies and many can benefit from custom commands. LipSurf functionality does not begin and end with the what it comes installed with. A subset of plugins come installed by default (plugins for the browser, Google, Reddit etc.) and additional plugins can be installed by users from within the extension. Plugins abstract the commands so they can stay separate from the extensions foundation — evolving fluidly with website updates.</p><p>Lastly, of course plugins <a href="https://github.com/lipsurf/plugins" target="_blank" rel="noopener noreferrer">can be shared<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> easily with the community or kept private if desired.</p><h4 id="examples" tabindex="-1"><a class="header-anchor" href="#examples" aria-hidden="true">#</a> Examples</h4><ul><li>If you want to write power commands for a website you use, you can write a plugin for that.</li><li>If you want to use an internal web-based company tool with LipSurf, you can write a plugin for that.</li><li>If you find that annotations are broken on a certain website you frequent, you can submit a PR to upgrade just the Navigation plugin which is separate from the core codebase.</li><li>If you want to give users of your own site voice command functionality, you can write a plugin for your site.</li></ul><div class="custom-container tip"><p class="custom-container-title">NOTE</p><p>Plugins are usually for a specific site (such as the Reddit plugin for upvoting, going to subreddits, viewing comments etc.) but they can also be for a specific set of functionality — like making all LipSurf tags in kanji so you can save screen space and practice Japanese reading.</p><p>Plugins should aim to: &quot;Do one thing, and do it well.&quot; ™</p></div><div class="custom-container danger"><p class="custom-container-title">DANGER</p><p>Plugins must meet a high minimum standard of quality before being accepted as community plugins for the general public.</p></div><hr><h2 id="anatomy" tabindex="-1"><a class="header-anchor" href="#anatomy" aria-hidden="true">#</a> Anatomy</h2><p>Plugins are JavaScript objects that extend a <a href="/api-reference/plugin.html#pluginbase" class="">PluginBase</a> object and adhere to an <a href="/api-reference/plugin.html" class=""><code>Plugin</code></a> contract. It is recommended to write in <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> to have more confidence that your plugin is implemented correctly.</p><div class="custom-container tip"><p class="custom-container-title">NOTE</p><p>All relevant examples will be given in TypeScript.</p></div><p>Here is an example of a simple, complete plugin:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;@lipsurf/types/extension&quot;/&gt;</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> PluginBase<span class="token operator">:</span> IPluginBase<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span>IPluginBase <span class="token operator">&amp;</span> IPlugin<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>PluginBase<span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">{</span>
    niceName<span class="token operator">:</span> <span class="token string">&quot;Gmail&quot;</span><span class="token punctuation">,</span>
    match<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https:\/\/mail\.google\.com</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    apiVersion<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    commands<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;Compose Mail&quot;</span><span class="token punctuation">,</span>
        description<span class="token operator">:</span> <span class="token string">&quot;Open the new email composition form in Gmail.&quot;</span><span class="token punctuation">,</span>
        global<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        match<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;compose mail&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write new mail&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">pageFn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;https://mail.google.com/mail/?view=cm&amp;fs=1&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="gotchas" tabindex="-1"><a class="header-anchor" href="#gotchas" aria-hidden="true">#</a> Gotchas</h2><ul><li>enums may cause issues if they are referenced in top-level scope. This is a shortcoming of the current plugin builder. As a workaround, you can use plain JavaScript objects instead of TypeScript enums.</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/lipsurf/plugins/edit/main/docs/architecture.md" rel="noopener noreferrer" target="_blank" aria-label="Improve this page"><!--[--><!--]--> Improve this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 492864+mikob@users.noreply.github.com">mikob</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/quick-start.html" class="" aria-label="5 Minute Quick Start"><!--[--><!--]--> 5 Minute Quick Start <!--[--><!--]--></a></span><span class="next"><a href="/dynamic-matching.html" class="" aria-label="Match Patterns"><!--[--><!--]--> Match Patterns <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2bad79ab.js" defer></script>
  </body>
</html>
