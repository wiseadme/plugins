<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <title>Match Patterns | LipSurf Plugin Developer Documentation</title><meta name="description" content="Documentation for developers looking to extend LipSurf using the official API. Create voice commands and shortcuts for the browser.">
    <link rel="modulepreload" href="/assets/app.2bad79ab.js"><link rel="modulepreload" href="/assets/dynamic-matching.html.c895745b.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/dynamic-matching.html.3a0e431d.js">
    <link rel="stylesheet" href="/assets/style.f30c0ec3.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/icon-128.png" alt="LipSurf Plugin Developer Documentation"><span class="site-name can-hide">LipSurf Plugin Developer Documentation</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/lipsurf/plugins" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/lipsurf/plugins" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">Basics <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/" class="sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----></li><li><a href="/quick-start.html" class="sidebar-item" aria-label="5 Minute Quick Start"><!--[--><!--]--> 5 Minute Quick Start <!--[--><!--]--></a><!----></li><li><a href="/architecture.html" class="sidebar-item" aria-label="Architecture"><!--[--><!--]--> Architecture <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dynamic-matching.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Match Patterns"><!--[--><!--]--> Match Patterns <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/dynamic-matching.html#compact-form" class="router-link-active router-link-exact-active sidebar-item" aria-label="Compact Form"><!--[--><!--]--> Compact Form <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dynamic-matching.html#wildcard-matching" class="router-link-active router-link-exact-active sidebar-item" aria-label="Wildcard Matching"><!--[--><!--]--> Wildcard Matching <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dynamic-matching.html#numeral-matching" class="router-link-active router-link-exact-active sidebar-item" aria-label="Numeral Matching"><!--[--><!--]--> Numeral Matching <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/dynamic-matching.html#match-function" class="router-link-active router-link-exact-active sidebar-item" aria-label="Match Function"><!--[--><!--]--> Match Function <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Advanced <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/contexts.html" class="sidebar-item" aria-label="Contexts"><!--[--><!--]--> Contexts <!--[--><!--]--></a><!----></li><li><a href="/langs.html" class="sidebar-item" aria-label="Internationalization"><!--[--><!--]--> Internationalization <!--[--><!--]--></a><!----></li><li><a href="/plugin-level-settings.html" class="sidebar-item" aria-label="Plugin-level Settings"><!--[--><!--]--> Plugin-level Settings <!--[--><!--]--></a><!----></li><li><a href="/testing.html" class="sidebar-item" aria-label="Testing"><!--[--><!--]--> Testing <!--[--><!--]--></a><!----></li><li><a href="/recipes.html" class="sidebar-item" aria-label="Recipes"><!--[--><!--]--> Recipes <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Help <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/help.html" class="sidebar-item" aria-label="Get Help"><!--[--><!--]--> Get Help <!--[--><!--]--></a><!----></li><li><a href="/glossary.html" class="sidebar-item" aria-label="Glossary"><!--[--><!--]--> Glossary <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">API Reference <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/api-reference/plugin.html" class="sidebar-item" aria-label="Plugin"><!--[--><!--]--> Plugin <!--[--><!--]--></a><!----></li><li><a href="/api-reference/command.html" class="sidebar-item" aria-label="Commands"><!--[--><!--]--> Commands <!--[--><!--]--></a><!----></li><li><a href="/api-reference/pluginbase-util.html" class="sidebar-item" aria-label="PluginBase.util"><!--[--><!--]--> PluginBase.util <!--[--><!--]--></a><!----></li><li><a href="/api-reference/test.html" class="sidebar-item" aria-label="Test"><!--[--><!--]--> Test <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Enterprise <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/api-reference/customstt.html" class="sidebar-item" aria-label="Custom STT API"><!--[--><!--]--> Custom STT API <!--[--><!--]--></a><!----></li><li><a href="/api-reference/script.html" class="sidebar-item" aria-label="LipSurf.js"><!--[--><!--]--> LipSurf.js <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="match-patterns" tabindex="-1"><a class="header-anchor" href="#match-patterns" aria-hidden="true">#</a> Match Patterns</h1><div class="custom-container warning"><p class="custom-container-title">NOTE</p><p>It&#39;s recommended that you go through the <a href="/quick-start.html" class="">5 Minute Quick Start</a> first to understand how to create and install your plugin.</p></div><h2 id="compact-form" tabindex="-1"><a class="header-anchor" href="#compact-form" aria-hidden="true">#</a> Compact Form</h2><p>Instead of writing out potentially 100s of forms for a command&#39;s <a href="/api-reference/command.html#match" class="">match</a> property, you can use compact form syntax.</p><p>eg. <code>&#39;[delete/remove] [/the ]previous [word/# words]&#39;</code> expands to:</p><ul><li>delete previous word</li><li>remove previous word</li><li>delete the previous word</li><li>remove the previous word</li><li>delete previous # words</li><li>remove previous # words</li><li>delete the previous # words</li><li>remove the previous # words</li></ul><div class="custom-container tip"><p class="custom-container-title">TIPS</p><ul><li>You cannot nest brackets.</li><li>Priority is respected by the order in the brackets.</li></ul></div><h2 id="wildcard-matching" tabindex="-1"><a class="header-anchor" href="#wildcard-matching" aria-hidden="true">#</a> Wildcard Matching</h2><p>What if we want a plugin that accepts an arbitrary argument after some key words (AKA a slot)?</p><p>Let&#39;s make a plugin that shows the weather for any city when user says: <span class="voice-cmd">weather for [city name]</span> (eg. <span class="voice-cmd">weather for Chiang Mai</span>)</p><p><em>Easy peasy.</em></p><p>Use <code>*</code> in your <code>match</code> string to greedily match any words.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;@lipsurf/types/extension&quot;/&gt;</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> PluginBase<span class="token operator">:</span> IPluginBase<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span>IPluginBase <span class="token operator">&amp;</span> IPlugin<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>PluginBase<span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">{</span>
    niceName<span class="token operator">:</span> <span class="token string">&quot;Weather&quot;</span><span class="token punctuation">,</span>
    match<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*\.accuweather\.com</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    apiVersion<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    commands<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;Check the Weather&quot;</span><span class="token punctuation">,</span>
        description<span class="token operator">:</span> <span class="token string">&quot;Check the weather for a given city.&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// say it on any page (not just accuweather domain)</span>
        global<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        match<span class="token operator">:</span> <span class="token string">&quot;[weather/forecast] [for/in] *&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">pageFn</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>transcript<span class="token punctuation">,</span> <span class="token punctuation">{</span> preTs<span class="token punctuation">,</span> normTs <span class="token punctuation">}</span><span class="token operator">:</span> TsData<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://api.accuweather.com/locations/v1/cities/autocomplete?q=chiang%20mai&amp;apikey=d41dfd5e8a1748d0970cba6637647d96&amp;language=en-us&amp;get_param=value</span>
          <span class="token comment">// ex resp: [{&quot;Version&quot;:1,&quot;Key&quot;:&quot;317505&quot;,&quot;Type&quot;:&quot;City&quot;,&quot;Rank&quot;:41,&quot;LocalizedName&quot;:&quot;Chiang Mai&quot;,&quot;Country&quot;:{&quot;ID&quot;:&quot;TH&quot;,&quot;LocalizedName&quot;:&quot;Thailand&quot;},&quot;AdministrativeArea&quot;:{&quot;ID&quot;:&quot;50&quot;,&quot;LocalizedName&quot;:&quot;Chiang Mai&quot;}}]</span>
          <span class="token comment">// https://www.accuweather.com/en/th/chiang-mai/317505/weather-forecast/317505</span>
          <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span>
            <span class="token keyword">await</span> window<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>
              <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.accuweather.com/locations/v1/cities/autocomplete?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preTs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;apikey=d41dfd5e8a1748d0970cba6637647d96&amp;language=en-us&amp;get_param=value</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">let</span> cityId <span class="token operator">=</span> resp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Key<span class="token punctuation">;</span>
          <span class="token keyword">let</span> countryCode <span class="token operator">=</span> resp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Country<span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">let</span> cityName <span class="token operator">=</span> resp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>LocalizedName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.accuweather.com/en/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>countryCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cityId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/weather-forecast/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cityId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="numeral-matching" tabindex="-1"><a class="header-anchor" href="#numeral-matching" aria-hidden="true">#</a> Numeral Matching</h2><p><em>Ain&#39;t nothin&#39; to it.</em></p><p>Use <code>#</code> in your <code>match</code> string to match numerals or ordinals including ones that are spelled-out (ie. <span class="voice-cmd">four-thousand</span>)</p><p>Let&#39;s write a plugin that opens a tab with URL x for y minutes so that we can limit it&#39;s time wasting-ness. This might be useful if we need to check Facebook but don&#39;t want to get sucked into the feed for too long.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;@lipsurf/types/extension&quot;/&gt;</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> PluginBase<span class="token operator">:</span> IPluginBase<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span>IPluginBase <span class="token operator">&amp;</span> IPlugin<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>PluginBase<span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">{</span>
    niceName<span class="token operator">:</span> <span class="token string">&quot;Anti-procrastination&quot;</span><span class="token punctuation">,</span>
    description<span class="token operator">:</span> <span class="token string">&quot;Helpers for overcoming procrastination.&quot;</span><span class="token punctuation">,</span>
    match<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    apiVersion<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    commands<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;Self Destructing Tab&quot;</span><span class="token punctuation">,</span>
        description<span class="token operator">:</span>
          <span class="token string">&quot;Open a new tab with x website for y minutes. Useful for limiting the time-sucking power of sites like facebook, reddit, twitter etc.&quot;</span><span class="token punctuation">,</span>
        global<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        match<span class="token operator">:</span> <span class="token string">&quot;open * for # minutes&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">pageFn</span><span class="token operator">:</span> <span class="token punctuation">(</span>transcript<span class="token punctuation">,</span> siteStr<span class="token operator">:</span> TsData<span class="token punctuation">,</span> minutes<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">site: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>siteStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, minutes: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="match-function" tabindex="-1"><a class="header-anchor" href="#match-function" aria-hidden="true">#</a> Match Function</h2><p>For the most advanced cases, you can write a function that takes in transcripts as they come down the wire and return <code>undefined</code> when there&#39;s <em>no match</em>, or an array of arguments to pass to the <code>pageFn</code> when there <em>is</em> a match.</p><p>Use cases include:</p><ul><li>Match based on something on the page</li><li>Match based on some internal plugin state</li><li>Regex matching</li></ul><p><em>Cake walk.</em></p><p>We need to make <code>match</code> an object of type <a href="/api-reference/command.html#dynamicmatch" class=""><code>DynamicMatch</code></a></p><p>How about a plugin for Gmail that moves the currently selected messages to a folder that the user commands to?</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>We could use the wildcard matching for this (eg. &quot;move to *&quot;) but then we cant limit the user&#39;s choices to valid folders.</p></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;@lipsurf/types/extension&quot;/&gt;</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> PluginBase<span class="token operator">:</span> IPluginBase<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span>IPluginBase <span class="token operator">&amp;</span> IPlugin<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>PluginBase<span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">{</span>
    niceName<span class="token operator">:</span> <span class="token string">&quot;Gmail&quot;</span><span class="token punctuation">,</span>
    match<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https:\/\/mail\.google\.com</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    apiVersion<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    commands<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;Move to Folder&quot;</span><span class="token punctuation">,</span>
        description<span class="token operator">:</span> <span class="token string">&quot;Move already selected emails to a spoken folder&quot;</span><span class="token punctuation">,</span>
        match<span class="token operator">:</span> <span class="token punctuation">{</span>
          description<span class="token operator">:</span> <span class="token string">&#39;Say &quot;move to [folder name]&quot;&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span>transcript<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// exercise left to the reader...</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">pageFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// exercise left to the reader...</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">NOTE</p><p>The match function needs to check the whole transcript for matches and then return indexes for which parts it used. This way the transcript can have the proper section success highlighted (in green) that matches a command, and command chaining will work.</p></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/lipsurf/plugins/edit/main/docs/dynamic-matching.md" rel="noopener noreferrer" target="_blank" aria-label="Improve this page"><!--[--><!--]--> Improve this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 492864+mikob@users.noreply.github.com">mikob</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/architecture.html" class="" aria-label="Architecture"><!--[--><!--]--> Architecture <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2bad79ab.js" defer></script>
  </body>
</html>
